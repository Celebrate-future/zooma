<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <!-- ZOOMA SPARQL datasource access configuration -->
    <context:annotation-config />

    <bean id="jenaVirtuosoExecutorService" class="uk.ac.ebi.fgpt.lode.impl.JenaVirtuosoExecutorService">
    </bean>


    <bean id="queryManager" class="uk.ac.ebi.fgpt.zooma.service.QueryManager" init-method="init">
        <property name="propertiesMapAdapter" ref="propertiesMapAdapter" />
        <property name="sparqlQueryResource" value="classpath:queries.sparql" />
    </bean>


    <bean id="prefixProperties" class="org.springframework.beans.factory.config.PropertiesFactoryBean">
        <property name="location" value="classpath:zooma/prefix.properties" />
    </bean>

    <bean id="propertiesMapAdapter" class="uk.ac.ebi.fgpt.zooma.util.PropertiesMapAdapter" init-method="init">
        <property name="properties" ref="prefixProperties" />
    </bean>

    <bean id="lodeAnnotationDAO" class="uk.ac.ebi.fgpt.zooma.datasource.SparqlAnnotationDAO" autowire-candidate="false">
        <property name="queryManager" ref="queryManager"/>
        <property name="queryService" ref="jenaVirtuosoExecutorService"/>
        <property name="biologicalEntityDAO" ref="lodeBiologicalEntityDAO" />
        <property name="annotationZoomaSerializer" ref="annotationSerializer"/>
    </bean>

    <bean id="lodeBiologicalEntityDAO" class="uk.ac.ebi.fgpt.zooma.datasource.SparqlBiologicalEntityDAO" autowire-candidate="false">
        <property name="queryManager" ref="queryManager"/>
        <property name="queryService" ref="jenaVirtuosoExecutorService"/>
        <property name="biologicalEntityZoomaSerializer" ref="bioentitySerializer"/>
    </bean>

    <bean id="lodeOntologyDAO" class="uk.ac.ebi.fgpt.zooma.datasource.SparqlOntologyDAO" autowire-candidate="false">
        <property name="queryManager" ref="queryManager"/>
        <property name="queryService" ref="jenaVirtuosoExecutorService"/>
    </bean>

    <bean id="lodePropertyDAO" class="uk.ac.ebi.fgpt.zooma.datasource.SparqlPropertyDAO" autowire-candidate="false">
        <property name="queryManager" ref="queryManager"/>
        <property name="queryService" ref="jenaVirtuosoExecutorService"/>
        <property name="propertyZoomaSerializer" ref="propertySerializer"/>
    </bean>

    <bean id="lodeStudyDAO" class="uk.ac.ebi.fgpt.zooma.datasource.SparqlStudyDAO" autowire-candidate="false">
        <property name="queryManager" ref="queryManager"/>
        <property name="queryService" ref="jenaVirtuosoExecutorService"/>
        <property name="studyZoomaSerializer" ref="studySerializer"/>
    </bean>

    <bean id="lodeAnnotationSummaryDAO" class="uk.ac.ebi.fgpt.zooma.datasource.SparqlAnnotationSummaryDAO" autowire-candidate="false">
        <property name="queryManager" ref="queryManager"/>
        <property name="queryService" ref="jenaVirtuosoExecutorService"/>
        <property name="propertyDAO" ref="lodePropertyDAO" />
    </bean>

    <bean id="lodeAnnotationProvenanceDAO" class="uk.ac.ebi.fgpt.zooma.datasource.SparqlAnnotationProvenanceDAO" autowire-candidate="false">
        <property name="queryManager" ref="queryManager"/>
        <property name="queryService" ref="jenaVirtuosoExecutorService"/>
    </bean>

    <bean name="annotationSerializer" class="uk.ac.ebi.fgpt.zooma.io.OWLAPIAnnotationSerializer" />
    <bean id="bioentitySerializer" class="uk.ac.ebi.fgpt.zooma.io.OWLAPIBiologicalEntitySerializer">
    </bean>
    <bean id="propertySerializer" class="uk.ac.ebi.fgpt.zooma.io.OWLAPIPropertySerializer">
    </bean>
    <bean id="studySerializer" class="uk.ac.ebi.fgpt.zooma.io.OWLAPIStudySerializer">
    </bean>

</beans>